---
title: "child"
author: "sl team"
date: "4/26/2020"
output: html_document
---

```{r, echo = FALSE}
library(knitr)
knit_engines$set(asis = function(options) {
  if (options$echo && options$eval) knit_child(text = options$code)
})
my_subset <- filter(my_vars, family == families[k] & !is.na(variable))

if (!is.null(my_blog)){
  blog_aggregate <- filter(my_blog, family == families[k] & !is.na(entry_aggregates))
  blog_disaggregate <- filter(my_blog, family == families[k] & !is.na(entry_disaggregates))
}else {
  blog_aggregate <- NULL
  blog_disaggregate <- NULL
}



```


## `r gsub("_", " ", families[k])`  {.tabset  .tabset-pills}

### Aggregates

```{r, eval=(my_subset$family[[1]]=="Aid"), echo = FALSE, fig.height = 10, fig.width=11, message = FALSE, warning = FALSE, results = 'hide'}

bars_together(my_data, my_subset, nrow=5)

```


```{r, eval=(my_subset$family[[1]]=="Daily behavior"), echo = FALSE, fig.height = 18, fig.width=11, message = FALSE, warning = FALSE, results = 'hide'}

all_bar_plot(my_data, my_subset, nrow=6)


```


```{r, eval=(my_subset$family[[1]]=="Economic impact"), echo = FALSE, fig.height = 5, fig.width=11, message = FALSE, warning = FALSE, results = 'hide'}

all_bar_plot(my_data, my_subset, nrow=2)

```


```{r, eval=(my_subset$family[[1]]=="Government performance"), echo = FALSE, fig.height = 5, fig.width=11, message = FALSE, warning = FALSE, results = 'hide'}

all_bar_plot(my_data, my_subset, nrow=2)

```


```{r, eval=(my_subset$family[[1]]=="Health"), echo = FALSE, fig.height = 8, fig.width=11, message = FALSE, warning = FALSE, results = 'hide'}

all_bar_plot(my_data, my_subset, nrow=3)

```


```{r, eval=(my_subset$family[[1]]=="Mask behavior and perception"), echo = FALSE, fig.height = 8, fig.width=11, message = FALSE, warning = FALSE, results = 'hide'}

bars_together(my_data, my_subset, nrow=4)


```

```{r, eval=(my_subset$family[[1]]=="Trust"), echo = FALSE, fig.height = 5, fig.width=11, message = FALSE, warning = FALSE, results = 'hide'}

all_bar_plot(my_data, my_subset, nrow=2)


```



### Definitions of measures

```{r, echo = FALSE, warning = FALSE}

if("min" %in% colnames(my_subset) & "max" %in% colnames(my_subset))
{
  my_subset %>% mutate(range = paste(as.character(min), "-", as.character(max))) %>%
    select(short_label, description, range) %>% 
   kable(caption = "Data definitions", col.names = c("Measure", "Definition", "Range"))
}else {
  my_subset %>% select(short_label, description) %>% 
  kable(caption = "Data definitions", col.names = c("Measure", "Definition"))
  }

```

```{r, include = FALSE}
k <- k+1
```

```{r, child = childRmd, echo = FALSE, eval = k <= n_families}

```
